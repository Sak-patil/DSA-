#include <stdio.h>
#include<stdlib.h>
#include<ctype.h>
# define max 100

char stack [max];
int top=-1;
char push(char ch){
    if(top==max-1){
        return '\0';
    }
    else{
        top++;
        stack[top]=ch;
    }
}

char pop(){
    if(top==-1){
        return '\0';
    }
    else{
        char ch = stack[top];
        top--;
        return ch;
    }
}

int precedence(char ch){
    if(ch=='^'){
        return 3;
    }
    else if(ch=='+'||ch=='-'){
        return 1;
    }
    else if(ch=='*'||ch=='/'){
        return 2;
    }
    return 0;
}

int isoperator(char ch){
    return(ch=='^'||ch=='*'||ch=='/'||ch=='+'||ch=='-');
}

void infixtopostfix(char infix[]){
    char postfix[max];
    int j=0;
    char ch;
    for(int i=0;infix[i]!='\0';i++){
        ch=infix[i];
        if(isalnum(ch)){
            postfix[j++]=ch;
        }
    
        else if(ch=='('){
            push(ch);
        }
        else if(ch==')'){
            while(top!=-1 && stack[top]!='(' ){
                postfix[j++]=pop();
                
            }
            if (top != -1 && stack[top] == '(') {
                pop(); // Discard the '('
            }
        }
        else if(isoperator(ch)){
            while(top!=-1&&precedence(stack[top])>=precedence(ch)){
                postfix[j++]=pop();
            }
            push(ch);
        }
    }
    while(top!=-1){
            postfix[j++]=pop();
        }
        postfix[j]='\0';
        printf("postfix \n");
        printf("%s",postfix);
}

int main(){
    char infix[max];
    printf("infix \n");
    scanf("%s",infix);
    infixtopostfix(infix);
    return 0;
}
